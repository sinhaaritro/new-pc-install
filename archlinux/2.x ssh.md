# Setting Up SSH Keys on Arch Linux

Follow this step-by-step guide to set up SSH keys on Arch Linux and use them with GitHub.

---

# **Table of Contents**
- [**Process**](#process)
  - [Step 1: Check for Existing SSH Keys](#step-1-check-for-existing-ssh-keys)
  - [Step 2: Generate a New SSH Key](#step-2-generate-a-new-ssh-key)
  - [Step 3: Add the SSH Key to the SSH Agent](#step-3-add-the-ssh-key-to-the-ssh-agent)
  - [Step 4: Add the SSH Key to GitHub](#step-4-add-the-ssh-key-to-github)
- [**Test the SSH Connection for GitHub**](#test-the-ssh-connection-for-github)
- [**Multikey Setup**](#multikey-setup)
  - [Keys Naming Convention](#keys-naming-convention)
  - [Organize Keys in a Structured Location](#organize-keys-in-a-structured-location)
  - [Process**](#process)
    - [Step 1: Generate Separate SSH Keys](#step-1-generate-separate-ssh-keys)
    - [Step 2: Configure the SSH config File](#step-2-configure-the-ssh-config-file)
    - [Step 3: Use Host Aliases](#step-3-use-host-aliases)

---
# Process
## Step 1: Check for Existing SSH Keys
1. Open a terminal and run:
   ```bash
   ls ~/.ssh
   ```
2. Look for files named `id_rsa` and `id_rsa.pub`. If they exist, you already have an SSH key pair.


## Step 2: Generate a New SSH Key
If no SSH keys exist or you want to create a new pair:

1. Run the following command, replacing `your_email@example.com` with your GitHub email:
   ```bash
   ssh-keygen -t ed25519 -C "your_email@example.com"
   ```
   > If your system doesn't support Ed25519, use `rsa` instead:
   ```bash
   ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
   ```

2. When prompted to "Enter a file in which to save the key," press `Enter` to accept the default location (`~/.ssh/id_ed25519`).

3. If prompted for a passphrase, add one for extra security or press `Enter` for no passphrase.


## Step 3: Add the SSH Key to the SSH Agent

1. Start the SSH agent:
   ```bash
   eval "$(ssh-agent -s)"
   ```
2. Add your SSH key to the agent:
   ```bash
   ssh-add ~/.ssh/id_ed25519
   ```
   Replace `id_ed25519` with the appropriate file name if you used a different algorithm or key name.


## Step 4: Add the SSH Key to GitHub


1. Copy your SSH public key to the clipboard:
   If `nvim` is not installed, use:
   Once inside nvim, copy the contents:
   - Press `v` to start visual mode.
   - Use arrow keys or `gg` and `G` to select all text.
   - Press `y` to copy the selection to the clipboard.
   ```bash
   nvim ~/.ssh/id_ed25519.pub
   ```
   
   Use `cat`
   ```bash
   cat ~/.ssh/id_ed25519.pub
   ```
   Then manually copy the output.

3. Log in to your GitHub account via the website.

4. Go to **Settings > SSH and GPG keys**.

5. Click **New SSH Key**.

6. Paste your public key into the "Key" field, give it a title, and click **Add SSH Key**.

---

# Test the SSH Connection for GitHub

1. In your terminal, run:
   ```bash
   ssh -T git@github.com
   ```
2. You should see a message like:
   ```
   Hi username! You've successfully authenticated, but GitHub does not provide shell access.
   ```

---

# Multikey Setup
If you have multiple accounts of the same service or different services using different SSH keys, create a `~/.ssh/config` file:

## Keys Naming Convention
Use name like `id_ed25519_service1_account1`, `id_ed25519_service1_account2`, `id_ed25519_service2_account1`

Replace `account1` and `account2` with descriptive names for clarity (e.g., `personal`, `work`, or `service_name`).

## Organize Keys in a Structured Location
- Store all SSH keys in the `~/.ssh` directory.
- Use descriptive names for clarity:
   ```js
   ~/.ssh/
  ├── id_ed25519_account1
  ├── id_ed25519_account1.pub
  ├── id_ed25519_account2
  ├── id_ed25519_account2.pub
  ├── config
   ```

## Process
### Step 1: Generate Separate SSH Keys
- Generate a unique SSH key pair for each account or service:
  ```bash
  ssh-keygen -t ed25519 -C "your_email_account1@example.com" -f ~/.ssh/id_ed25519_account1
  ssh-keygen -t ed25519 -C "your_email_account2@example.com" -f ~/.ssh/id_ed25519_account2
  ```
- Use a passphrase for added security if desired.

### Step 2: Configure the SSH config File
The SSH `config` file allows you to specify which key to use for each host. Create or edit the file at `~/.ssh/config`:
  ```bash
  touch ~/.ssh/config
  chmod 600 ~/.ssh/config
  ```

Add entries for each key:
  ```txt
  # Personal GitHub Account
  Host github-personal
      HostName github.com
      User git
      IdentityFile ~/.ssh/id_ed25519_account1
  
  # Work GitHub Account
  Host github-work
      HostName github.com
      User git
      IdentityFile ~/.ssh/id_ed25519_account2
  ```

### Step 3: Use Host Aliases
When cloning or pushing repositories, use the host aliases defined in your config file:
- For the personal account:
  ```bash
  git clone git@github-personal:username/repo.git
  ```
- For the work account:
  ```bash
  git clone git@github-work:username/repo.git
  ```
